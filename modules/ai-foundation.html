<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Foundations - Module</title>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="modules-inner.css" />
    <style>
      /* Lightweight quiz styles scoped to this page */
      :root {
        --font-sans: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      }
      html {
        -webkit-text-size-adjust: 100%;
      }
      body {
        font-family: var(--font-sans);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
      }
      h1,
      h2,
      h3 {
        letter-spacing: -0.02em;
      }
      p,
      li {
        line-height: 1.65;
      }
      .quiz {
        position: relative;
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid rgba(140, 82, 255, 0.2);
        padding: 16px;
        border-radius: 12px;
        margin-top: 12px;
      }
      .quiz-title {
        font-weight: 700;
        margin-bottom: 8px;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .quiz-question {
        color: rgba(255, 255, 255, 0.9);
        margin: 8px 0 10px;
      }
      .quiz-options {
        display: grid;
        gap: 10px;
      }
      .quiz-option {
        display: flex;
        align-items: start;
        gap: 8px;
        cursor: pointer;
        padding: 6px 8px;
        border-radius: 10px;
        border: 1px solid transparent;
      }
      .quiz-option input {
        margin-top: 3px;
      }
      .quiz-check {
        margin-top: 10px;
        background: linear-gradient(135deg, #8c52ff, #cb6ce6);
        color: #fff;
        border: none;
        border-radius: 10px;
        padding: 10px 14px;
        font-weight: 700;
        cursor: pointer;
      }
      .quiz-feedback {
        margin-top: 10px;
        font-weight: 600;
      }
      /* Visual states */
      .quiz.correct-state {
        border-color: #10b981;
        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.25) inset;
      }
      .quiz.wrong-state {
        border-color: #ef4444;
        box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.25) inset;
      }
      .quiz.correct-state::after {
        content: "Correct!";
        position: absolute;
        top: 10px;
        right: 12px;
        background: #10b981;
        color: #eafff5;
        padding: 4px 10px;
        border-radius: 999px;
        font-weight: 800;
      }
      .quiz.wrong-state::after {
        content: "Incorrect";
        position: absolute;
        top: 10px;
        right: 12px;
        background: #ef4444;
        color: #fff;
        padding: 4px 10px;
        border-radius: 999px;
        font-weight: 800;
      }
      .quiz .opt-correct {
        border-color: rgba(16, 185, 129, 0.7);
        background: rgba(16, 185, 129, 0.08);
      }
      .quiz .opt-wrong {
        border-color: rgba(239, 68, 68, 0.6);
        background: rgba(239, 68, 68, 0.06);
      }
      .quiz .opt-right {
        border-color: rgba(16, 185, 129, 0.7);
      }
      .quiz .mark {
        margin-left: auto;
        font-weight: 900;
      }
      .quiz .mark.ok {
        color: #10b981;
      }
      .quiz .mark.err {
        color: #ef4444;
      }
      @keyframes shake {
        10%,
        90% {
          transform: translateX(-1px);
        }
        20%,
        80% {
          transform: translateX(2px);
        }
        30%,
        50%,
        70% {
          transform: translateX(-4px);
        }
        40%,
        60% {
          transform: translateX(4px);
        }
      }
      .quiz.shake {
        animation: shake 0.35s both;
      }
      /* Reset progress UI */
      .reset-bar {
        display: flex;
        justify-content: flex-end;
        margin: 8px 0 16px;
      }
      .reset-btn {
        background: linear-gradient(135deg, #8c52ff, #cb6ce6);
        color: #fff;
        border: none;
        border-radius: 10px;
        padding: 10px 14px;
        font-weight: 700;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }
      /* Progress UI */
      .progress-wrap {
        margin: 8px 0 20px;
      }
      .progress-top {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 6px;
      }
      .progress-text {
        color: rgba(255, 255, 255, 0.9);
        font-weight: 700;
      }
      .progress-bar {
        position: relative;
        height: 18px;
        background: rgba(140, 82, 255, 0.15);
        border-radius: 999px;
        overflow: hidden;
        border: 1px solid rgba(140, 82, 255, 0.35);
      }
      .progress-fill {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, var(--primary), var(--secondary));
        transition: width 0.35s ease;
      }
      .progress-label {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 800;
        color: #fff;
        font-size: 0.9rem;
        letter-spacing: 0.02em;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.55);
        pointer-events: none;
      }
    </style>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <nav>
      <a href="../home.html" aria-label="Go to Home">
        <img src="../img/logo.svg" class="logo" alt="MaxAI" />
      </a>

      <div class="navigation">
        <ul>
          <i id="menu-close" class="fas fa-times"></i>
          <li><a href="../home.html">Home</a></li>
          <li><a href="../modules.html" class="active">Modules</a></li>
          <li><a href="../flashcard.html">Flashcard</a></li>
          <li><a href="../quiz.html">Quiz</a></li>
          <li><a href="../about.html">About Us</a></li>
        </ul>
        <img src="../img/menu.png" id="menu-btn" alt="Menu" />
      </div>

      <div class="profile-menu">
        <button
          type="button"
          class="profile-btn"
          aria-label="Profile"
          aria-expanded="false"
        >
          <i class="fas fa-user"></i>
        </button>
        <div class="menu">
          <a href="../userprofile.html"
            ><i class="fas fa-user-circle"></i> Profile</a
          >
          <a href="../login.html"
            ><i class="fas fa-right-from-bracket"></i> Logout</a
          >
        </div>
      </div>
    </nav>
    <script>
      (function () {
        const menu = document.querySelector(".profile-menu");
        if (!menu) return;
        const btn = menu.querySelector(".profile-btn");
        btn?.setAttribute("aria-expanded", "false");
        btn?.addEventListener("click", function (e) {
          e.preventDefault();
          const open = menu.classList.toggle("open");
          btn.setAttribute("aria-expanded", String(open));
        });
        document.addEventListener("click", function (e) {
          if (!menu.contains(e.target)) {
            menu.classList.remove("open");
            btn?.setAttribute("aria-expanded", "false");
          }
        });
      })();
    </script>

    <section id="about-home">
      <div class="hero-content">
        <div class="hero-badge">
          <i class="fas fa-robot"></i>
          <span>Beginner Friendly</span>
        </div>
        <h1>AI Foundations</h1>
        <p class="hero-subtitle">
          Start from zero and build solid, practical intuition
        </p>
        <div class="hero-stats">
          <div class="stat-item">
            <i class="fas fa-clock"></i>
            <span>2-3 hours</span>
          </div>
          <div class="stat-item">
            <i class="fas fa-signal"></i>
            <span>Beginner</span>
          </div>
          <div class="stat-item">
            <i class="fas fa-users"></i>
            <span>Free</span>
          </div>
        </div>
      </div>
      <div class="hero-visual">
        <div class="floating-card card-1">
          <i class="fas fa-brain"></i>
          <span>ML</span>
        </div>
        <div class="floating-card card-2">
          <i class="fas fa-network-wired"></i>
          <span>Neural</span>
        </div>
        <div class="floating-card card-3">
          <i class="fas fa-chart-line"></i>
          <span>Data</span>
        </div>
      </div>
    </section>

    <section id="course-inner">
      <div class="overview">
        <div class="course-panel">
          <div class="course-header">
            <img
              class="course-img"
              src="../img/ai-foundation.png"
              alt="AI Foundations"
            />
            <div class="course-overlay">
              <div class="play-button">
                <i class="fas fa-play"></i>
              </div>
            </div>
          </div>

          <div class="course-info">
            <div class="course-meta">
              <div class="meta-item">
                <i class="fas fa-calendar"></i>
                <span>Last updated: Aug 2025</span>
              </div>
            </div>

            <div class="callout info">
              <i class="fas fa-lightbulb"></i>
              <div>
                <strong>Pro Tip:</strong> Complete one lesson per day for
                optimal retention. Each lesson builds on the previous one.
              </div>
            </div>
            <div class="progress-wrap">
              <div
                id="progress-bar"
                class="progress-bar"
                role="progressbar"
                aria-valuemin="0"
                aria-valuenow="0"
                aria-valuemax="100"
              >
                <div
                  id="progress-fill"
                  class="progress-fill"
                  style="width: 0%"
                ></div>
                <div id="progress-label" class="progress-label">
                  0% Completed
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="content-sections">
          <div class="reset-bar">
            <button id="reset-progress" class="reset-btn">
              <i class="fa-solid fa-rotate-left"></i> Reset Progress
            </button>
          </div>

          <!-- Learning Objectives ---->
          <section class="content-section" id="objectives">
            <div class="section-header">
              <div class="section-icon">
                <i class="fas fa-bullseye"></i>
              </div>
              <h3>Learning Objectives</h3>
            </div>
            <div class="objectives-grid">
              <div class="objective-item">
                <i class="fas fa-check-circle"></i>
                <span>Define AI vs. ML vs. DL and where each applies</span>
              </div>
              <div class="objective-item">
                <i class="fas fa-check-circle"></i>
                <span>Explain the Turing Test and discuss its limitations</span>
              </div>
              <div class="objective-item">
                <i class="fas fa-check-circle"></i>
                <span
                  >Differentiate Narrow AI (ANI), AGI, and
                  Superintelligence</span
                >
              </div>
              <div class="objective-item">
                <i class="fas fa-check-circle"></i>
                <span
                  >Describe data: features, labels, splits, and leakage</span
                >
              </div>
              <div class="objective-item">
                <i class="fas fa-check-circle"></i>
                <span
                  >Compare supervised, unsupervised, and reinforcement
                  learning</span
                >
              </div>
              <div class="objective-item">
                <i class="fas fa-check-circle"></i>
                <span
                  >Compute and interpret precision, recall, F1, and
                  ROC-AUC</span
                >
              </div>
              <div class="objective-item">
                <i class="fas fa-check-circle"></i>
                <span
                  >Identify overfitting and apply
                  regularization/validation</span
                >
              </div>
              <div class="objective-item">
                <i class="fas fa-check-circle"></i>
                <span>Apply basic search ideas (BFS/DFS, A* intuition)</span>
              </div>
              <div class="objective-item">
                <i class="fas fa-check-circle"></i>
                <span
                  >Practice responsible AI: fairness, privacy,
                  transparency</span
                >
              </div>
            </div>
          </section>

          <section class="content-section" id="prerequisites">
            <div class="section-header">
              <div class="section-icon">
                <i class="fas fa-list-check"></i>
              </div>
              <h3>Prerequisites</h3>
            </div>
            <p>
              Curiosity and basic computer literacy. Optional: light Python or
              JavaScript helps, but is not required.
            </p>
            <div class="tags">
              <span class="tag">No advanced math</span>
              <span class="tag">No coding required</span>
              <span class="tag">Beginner friendly</span>
            </div>
          </section>

          <div class="lessons-container">
            <h3 class="lessons-title">Course Lessons</h3>
            <!-- Course Lessons --->
            <div class="lesson-item" data-lesson="1">
              <div class="lesson-header">
                <div class="lesson-number">01</div>
                <div class="lesson-content">
                  <h4>What Is AI?</h4>
                  <p>
                    Understanding artificial intelligence and its core concepts
                  </p>
                </div>
                <div class="lesson-status">
                  <i class="fas fa-lock-open"></i>
                </div>
              </div>
              <div class="lesson-details">
                <div class="lesson-meta">
                  <span><i class="fas fa-clock"></i> 8 min</span>
                  <span><i class="fas fa-file-text"></i> Notes</span>
                </div>
                <div class="lesson-preview">
                  <p>
                    Artificial Intelligence (AI) refers to the simulation of
                    human intelligence in machines that are programmed to think,
                    learn, and problem-solve. AI systems can perform tasks that
                    typically require human intelligence, such as understanding
                    natural language, recognizing patterns, solving problems,
                    and making decisions.
                  </p>
                  <div class="callout neutral">
                    <strong>Key terms:</strong> Agent, Environment, Rationality,
                    Symbolic vs. Statistical AI
                  </div>
                </div>
              </div>
            </div>

            <div class="lesson-item" data-lesson="2">
              <div class="lesson-header">
                <div class="lesson-number">02</div>
                <div class="lesson-content">
                  <h4>Turing Test: Testing Artificial Intelligence</h4>
                  <p>
                    What is the Turing Test? And what is the Importance of the
                    Turing Test in AI Development
                  </p>
                </div>
                <div class="lesson-status">
                  <i class="fas fa-lock-open"></i>
                </div>
              </div>
              <div class="lesson-details">
                <div class="lesson-meta">
                  <span><i class="fas fa-clock"></i> 6 min</span>
                  <span><i class="fas fa-file-text"></i> Notes</span>
                </div>
                <div class="lesson-preview">
                  <p>
                    Proposed by Alan Turing in 1950, the purpose of this test is
                    to evaluate whether a machine can exhibit intelligent
                    behavior indistinguishable from that of a human. Example: If
                    a machine can interact with a human through conversation,
                    and the human cannot distinguish whether it is a machine or
                    a human, then the machine has passed the Turing Test. This
                    test has become a benchmark in the development of artificial
                    intelligence to evaluate whether a machine's thinking and
                    behavior exhibit intelligence.
                  </p>
                  <div class="callout neutral">
                    <strong>Key terms:</strong> Turing Test, Imitation Game,
                    Indistinguishability, Natural language
                  </div>
                </div>
              </div>
            </div>

            <div class="lesson-item" data-lesson="3">
              <div class="lesson-header">
                <div class="lesson-number">03</div>
                <div class="lesson-content">
                  <h4>
                    History of Artificial Intelligence: From Expert Systems to
                    Deep Learning
                  </h4>
                  <p>
                    Early AI: Expert Systems and Evolution from Machine Learning
                    to Deep Learning
                  </p>
                </div>
                <div class="lesson-status">
                  <i class="fas fa-lock-open"></i>
                </div>
              </div>
              <div class="lesson-details">
                <div class="lesson-meta">
                  <span><i class="fas fa-clock"></i> 10 min</span>
                  <span><i class="fas fa-file-text"></i> Notes</span>
                </div>
                <div class="lesson-preview">
                  <p>
                    From the 1950s to the 1980s, AI began to develop, and expert
                    systems were used to solve problems that typically required
                    human knowledge and skills. Example: Some systems that can
                    diagnose diseases based on symptoms. From the 1990s to the
                    present, AI has experienced rapid development, with the
                    advent of machine learning, allowing machines to learn from
                    data, and deep learning, which processes information through
                    complex neural networks to make decisions. Example: Deep
                    learning is widely used in facial recognition and autonomous
                    vehicles.
                  </p>
                  <div class="callout neutral">
                    <strong>Key terms:</strong> Expert systems, AI winters,
                    Machine learning, Deep learning
                  </div>
                </div>
              </div>
            </div>

            <div class="lesson-item" data-lesson="4">
              <div class="lesson-header">
                <div class="lesson-number">04</div>
                <div class="lesson-content">
                  <h4>Categories of AI</h4>
                  <p>Narrow AI, General AI, and Superintelligence</p>
                </div>
                <div class="lesson-status">
                  <i class="fas fa-lock-open"></i>
                </div>
              </div>
              <div class="lesson-details">
                <div class="lesson-meta">
                  <span><i class="fas fa-clock"></i> 7 min</span>
                  <span><i class="fas fa-file-text"></i> Notes</span>
                </div>
                <div class="lesson-preview">
                  <p>
                    AI designed to perform specific tasks with limited
                    capabilities. Example: Siri, Google Assistant, or Netflix's
                    recommendation system. It capable of performing a wide range
                    of tasks and possessing human-like learning abilities. AI
                    that surpasses human intelligence and is capable of
                    exceeding human performance in almost all areas, including
                    creativity, decision-making, and social abilities.
                  </p>
                  <div class="callout neutral">
                    <strong>Key terms:</strong> Narrow AI (ANI), General AI
                    (AGI), Superintelligence (ASI)
                  </div>
                </div>
              </div>
            </div>

            <div class="lesson-item" data-lesson="5">
              <div class="lesson-header">
                <div class="lesson-number">05</div>
                <div class="lesson-content">
                  <h4>Introduction to Basic Logic and Search Algorithms</h4>
                  <p>Basic Logic in AI and Search Algorithms</p>
                </div>
                <div class="lesson-status">
                  <i class="fas fa-lock-open"></i>
                </div>
              </div>
              <div class="lesson-details">
                <div class="lesson-meta">
                  <span><i class="fas fa-clock"></i> 12 min</span>
                  <span><i class="fas fa-file-text"></i> Notes</span>
                </div>
                <div class="lesson-preview">
                  <p>
                    Logic is an important tool for AI to make decisions and
                    solve problems. AI uses logic to help machines think in a
                    structured way and perform reasoning. Example: AI uses
                    logical algorithms to solve puzzles like Sudoku or chess
                    problems. In AI, search algorithms are used to find
                    solutions to complex problems. Machines search for the best
                    solution through a series of steps or decisions. Examples:
                    Depth-First Search (DFS): Explores one branch to the end
                    before returning to explore other branches, and
                    Breadth-First Search (BFS): Explores all nodes at one level
                    before moving on to the next level.
                  </p>
                  <div class="callout neutral">
                    <strong>Key terms:</strong> Propositional logic, DFS, BFS,
                    Optimality, Completeness, Path cost
                  </div>
                </div>
              </div>
            </div>

            <div class="lesson-item" data-lesson="6">
              <div class="lesson-header">
                <div class="lesson-number">06</div>
                <div class="lesson-content">
                  <h4>Using JavaScript for Small Demonstrations</h4>
                  <p>Tic-Tac-Toe AI and Pathfinding Visualization</p>
                </div>
                <div class="lesson-status">
                  <i class="fas fa-lock-open"></i>
                </div>
              </div>
              <div class="lesson-details">
                <div class="lesson-meta">
                  <span><i class="fas fa-clock"></i> 25 min</span>
                  <span><i class="fas fa-file-text"></i> Notes</span>
                </div>
                <div class="lesson-preview">
                  <p>
                    Firstly, create a Tic-Tac-Toe AI using simple search
                    algorithms to play against human players. Demonstrate how a
                    machine decides the best next move based on the game state.
                    An interactive demonstration is provided on a website where
                    users can play against the AI. Secondly, visualize
                    pathfinding using the A* algorithm to find the best path
                    from start to end in a grid. Show how search algorithms can
                    be used to solve practical problems, such as robot
                    navigation. Users can see how the search algorithm finds the
                    optimal path in the grid.
                  </p>
                  <img
                    src="Tic-Tac-Toe AI.jpg"
                    alt="Tic-Tac-Toe AI"
                    class="profile-image"
                    width="500"
                    height="300"
                  />
                  <div class="callout neutral">
                    <strong>Key terms:</strong> Minimax, Heuristic, A* (A-star),
                    Nodes & edges
                  </div>
                </div>
              </div>
            </div>

            <!-- New lessons to deepen the module -->
            <div class="lesson-item" data-lesson="7">
              <div class="lesson-header">
                <div class="lesson-number">07</div>
                <div class="lesson-content">
                  <h4>Data, Features, and Labels</h4>
                  <p>What data looks like in ML and how it flows</p>
                </div>
                <div class="lesson-status">
                  <i class="fas fa-lock-open"></i>
                </div>
              </div>
              <div class="lesson-details">
                <div class="lesson-meta">
                  <span><i class="fas fa-clock"></i> 8 min</span>
                  <span><i class="fas fa-file-text"></i> Notes</span>
                </div>
                <div class="lesson-preview">
                  <p>
                    Most ML problems can be described with three words:
                    <strong>features</strong> (inputs),
                    <strong>labels</strong> (targets), and
                    <strong>examples</strong> (rows). A typical workflow is:
                    collect → clean → split (train/validation/test) → train →
                    evaluate → iterate.
                  </p>
                  <ul>
                    <li>
                      <strong>Tabular data:</strong> rows = examples, columns =
                      features
                    </li>
                    <li>
                      <strong>Images:</strong> features are pixels; labels could
                      be classes
                    </li>
                    <li>
                      <strong>Text:</strong> features are tokens/embeddings;
                      labels could be intents
                    </li>
                  </ul>
                  <div class="callout neutral">
                    <strong>Key terms:</strong> Features, Labels, Train/Val/Test
                    split, Leakage
                  </div>
                </div>
              </div>
            </div>

            <div class="lesson-item" data-lesson="8">
              <div class="lesson-header">
                <div class="lesson-number">08</div>
                <div class="lesson-content">
                  <h4>Learning Paradigms</h4>
                  <p>Supervised, unsupervised, and reinforcement learning</p>
                </div>
                <div class="lesson-status">
                  <i class="fas fa-lock-open"></i>
                </div>
              </div>
              <div class="lesson-details">
                <div class="lesson-meta">
                  <span><i class="fas fa-clock"></i> 8 min</span>
                  <span><i class="fas fa-file-text"></i> Notes</span>
                </div>
                <div class="lesson-preview">
                  <p>
                    <strong>Supervised</strong> uses labeled input→output pairs
                    (classification/regression).
                    <strong>Unsupervised</strong> finds structure without labels
                    (clustering, dimensionality reduction).
                    <strong>Reinforcement learning</strong> optimizes actions
                    via rewards.
                  </p>
                  <ul>
                    <li>Classification vs. regression</li>
                    <li>
                      Clustering (K-Means) and embeddings (PCA, t-SNE, UMAP)
                    </li>
                    <li>
                      Agents, policies, rewards, exploration vs. exploitation
                      (RL)
                    </li>
                  </ul>
                  <div class="callout neutral">
                    <strong>Key terms:</strong> Supervised, Unsupervised,
                    Reinforcement, Clustering, Policy, Reward
                  </div>
                </div>
              </div>
            </div>

            <div class="lesson-item" data-lesson="9">
              <div class="lesson-header">
                <div class="lesson-number">09</div>
                <div class="lesson-content">
                  <h4>Model Evaluation</h4>
                  <p>Accuracy, precision, recall, F1, and ROC-AUC</p>
                </div>
                <div class="lesson-status">
                  <i class="fas fa-lock-open"></i>
                </div>
              </div>
              <div class="lesson-details">
                <div class="lesson-meta">
                  <span><i class="fas fa-clock"></i> 10 min</span>
                  <span><i class="fas fa-file-text"></i> Notes</span>
                </div>
                <div class="lesson-preview">
                  <p>
                    For imbalanced classes, accuracy can be misleading. Use
                    <strong>precision</strong> (quality of positives),
                    <strong>recall</strong> (coverage of true positives), their
                    harmonic mean <strong>F1</strong>, and ranking metrics like
                    <strong>ROC-AUC</strong> or <strong>PR-AUC</strong>.
                  </p>
                  <ul>
                    <li><strong>Precision</strong> = TP / (TP + FP)</li>
                    <li><strong>Recall</strong> = TP / (TP + FN)</li>
                    <li>
                      <strong>F1</strong> = 2 · (Precision · Recall) /
                      (Precision + Recall)
                    </li>
                  </ul>
                  <div class="callout neutral">
                    <strong>Key terms:</strong> confusion matrix, threshold, PR
                    curve, ROC curve
                  </div>
                </div>
              </div>
            </div>

            <div class="lesson-item" data-lesson="10">
              <div class="lesson-header">
                <div class="lesson-number">10</div>
                <div class="lesson-content">
                  <h4>Overfitting and Generalization</h4>
                  <p>
                    Bias–variance, regularization, and validation strategies
                  </p>
                </div>
                <div class="lesson-status">
                  <i class="fas fa-lock-open"></i>
                </div>
              </div>
              <div class="lesson-details">
                <div class="lesson-meta">
                  <span><i class="fas fa-clock"></i> 10 min</span>
                  <span><i class="fas fa-file-text"></i> Notes</span>
                </div>
                <div class="lesson-preview">
                  <p>
                    <strong>Overfitting</strong> happens when a model memorizes
                    training noise. Mitigate with regularization (L1/L2),
                    dropout, early stopping, data augmentation, and strong
                    validation (k-fold, stratified splits).
                  </p>
                  <ul>
                    <li>
                      <strong>Bias</strong>: error from simplifying assumptions
                    </li>
                    <li>
                      <strong>Variance</strong>: error from sensitivity to data
                      fluctuations
                    </li>
                    <li>Find balance to improve generalization</li>
                  </ul>
                  <div class="callout neutral">
                    <strong>Key terms:</strong> Bias–variance, L1/L2 (weight
                    decay), early stopping, cross‑validation, data augmentation
                  </div>
                </div>
              </div>
            </div>

            <div class="lesson-item" data-lesson="11">
              <div class="lesson-header">
                <div class="lesson-number">11</div>
                <div class="lesson-content">
                  <h4>Ethics and Responsible AI</h4>
                  <p>Fairness, privacy, transparency, and safety</p>
                </div>
                <div class="lesson-status">
                  <i class="fas fa-lock-open"></i>
                </div>
              </div>
              <div class="lesson-details">
                <div class="lesson-meta">
                  <span><i class="fas fa-clock"></i> 8 min</span>
                  <span><i class="fas fa-file-text"></i> Notes</span>
                </div>
                <div class="lesson-preview">
                  <p>
                    Beyond performance, AI must be <strong>fair</strong>,
                    respect <strong>privacy</strong>, be
                    <strong>transparent</strong> about limitations, and consider
                    <strong>social impact</strong>. Evaluate datasets for bias
                    and design processes for oversight.
                  </p>
                  <ul>
                    <li>Consent and purpose limitation for data</li>
                    <li>Explainability and model cards</li>
                    <li>Human-in-the-loop for sensitive decisions</li>
                  </ul>
                  <div class="callout neutral">
                    <strong>Key terms:</strong> Fairness, Bias, Privacy,
                    Transparency, Accountability
                  </div>
                </div>
              </div>
            </div>

            <!-- Module summary -->
            <div class="lesson-item" data-lesson="12">
              <div class="lesson-header">
                <div class="lesson-number">12</div>
                <div class="lesson-content">
                  <h4>Module Summary</h4>
                  <p>
                    You can now explain what AI is, how the Turing Test relates
                    to intelligence, and how AI evolved from expert systems to
                    modern deep learning. You can distinguish ANI vs. AGI vs.
                    ASI, structure data into features and labels with proper
                    splits, pick between supervised/unsupervised/RL, evaluate
                    models with precision/recall/F1/ROC‑AUC, mitigate
                    overfitting, and reason about fairness, privacy and
                    transparency.
                  </p>
                  <p>
                    Next steps: explore the ML and Deep Learning modules, try a
                    small project (e.g., a classifier on tabular data), and
                    practice communicating model limitations responsibly.
                  </p>
                </div>
              </div>
            </div>
          </div>

          <section class="content-section" id="resources">
            <div class="section-header">
              <div class="section-icon">
                <i class="fas fa-book-open"></i>
              </div>
              <h3>Further Resources</h3>
            </div>
            <div class="resources-grid">
              <div class="resource-card">
                <div class="resource-icon">
                  <i class="fas fa-book"></i>
                </div>
                <h4>AI For Everyone</h4>
                <p>Andrew Ng's comprehensive overview course</p>
                <a
                  href="https://www.deeplearning.ai/courses/ai-for-everyone/"
                  class="resource-link"
                  >Learn More <i class="fas fa-arrow-right"></i
                ></a>
              </div>
              <div class="resource-card">
                <div class="resource-icon">
                  <i class="fas fa-code"></i>
                </div>
                <h4>scikit-learn</h4>
                <p>Beginner‑friendly machine learning API</p>
                <a
                  href="https://scikit-learn.org/stable/index.html"
                  class="resource-link"
                  >Learn More <i class="fas fa-arrow-right"></i
                ></a>
              </div>
            </div>
          </section>
        </div>
      </div>

      <aside class="enroll toc">
        <div class="toc-downloads">
          <h4>Course Materials</h4>
          <div class="download-item">
            <i class="fa-solid fa-file-lines"></i>
            <span>Summary notes (PDF)</span>
            <a
              class="download-btn download-notes"
              href="../materials/ai-foundations-summary.pdf"
              download
              aria-label="Download summary notes PDF"
              >Download</a
            >
          </div>
          <div class="download-item">
            <i class="fa-solid fa-file-code"></i>
            <span>Sample code (JS)</span>
            <button
              class="download-btn download-code"
              aria-label="Download sample code"
            >
              Download
            </button>
          </div>
        </div>

        <div class="toc-info">
          <div class="info-item">
            <i class="fa-regular fa-clock"></i>
            <span>Estimated time: ~2 hours</span>
          </div>
        </div>
      </aside>
    </section>

    <script>
      // Download helpers for notes and sample code
      (function () {
        function download(filename, content, mime) {
          try {
            const blob = new Blob([content], { type: mime || "text/plain" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = filename;
            a.style.display = "none";
            document.body.appendChild(a);
            a.click();
            a.remove();
            setTimeout(() => URL.revokeObjectURL(url), 400);
          } catch (_) {
            // Fallback: open data URL
            const a = document.createElement("a");
            a.href =
              "data:" +
              (mime || "text/plain") +
              ";charset=utf-8," +
              encodeURIComponent(content);
            a.download = filename;
            a.style.display = "none";
            document.body.appendChild(a);
            a.click();
            a.remove();
          }
        }
        const codeBtn = document.querySelector(".download-code");
        codeBtn &&
          codeBtn.addEventListener("click", function () {
            const code = `/**\n * AI Foundations — Sample Code (JS)\n * A* pathfinding on a grid (toy).\n */\n\nfunction astar(grid, start, goal) {\n  const h = (a,b)=> Math.abs(a.x-b.x)+Math.abs(a.y-b.y);\n  const key = (n)=> n.x+','+n.y;\n  const open = new Map();\n  const came = new Map();\n  const g = new Map();\n  const f = new Map();\n  g.set(key(start), 0);\n  f.set(key(start), h(start, goal));\n  open.set(key(start), start);\n\n  const neighbors = (n)=>[{x:n.x+1,y:n.y},{x:n.x-1,y:n.y},{x:n.x,y:n.y+1},{x:n.x,y:n.y-1}]\n    .filter(p=> grid[p.y] && grid[p.y][p.x] === 0); // 0 = free, 1 = wall\n\n  while (open.size) {\n    // pick node with smallest f\n    let currentKey, current, best = Infinity;\n    for (const [k,node] of open) {\n      const fv = f.get(k) ?? Infinity;\n      if (fv < best) { best = fv; currentKey = k; current = node; }\n    }\n    if (!current) break;\n    if (current.x===goal.x && current.y===goal.y) {\n      // reconstruct path\n      const path=[current]; let k=currentKey;\n      while (came.has(k)) { k = came.get(k); const [x,y]=k.split(',').map(Number); path.push({x,y}); }\n      return path.reverse();\n    }\n    open.delete(currentKey);\n    for (const nb of neighbors(current)) {\n      const nk = key(nb);\n      const tentative = (g.get(currentKey) ?? Infinity) + 1;\n      if (tentative < (g.get(nk) ?? Infinity)) {\n        came.set(nk, currentKey);\n        g.set(nk, tentative);\n        f.set(nk, tentative + h(nb, goal));\n        if (!open.has(nk)) open.set(nk, nb);\n      }\n    }\n  }\n  return null;\n}\n\n// Example usage:\n// 0=free,1=wall\nconst grid = [\n  [0,0,0,0,0],\n  [1,1,0,1,0],\n  [0,0,0,1,0],\n  [0,1,0,0,0],\n  [0,1,0,0,0]\n];\nconst path = astar(grid, {x:0,y:0}, {x:4,y:4});\nconsole.log('Path:', path);\n`;
            download(
              "ai-foundations-sample.js",
              code,
              "application/javascript"
            );
          });
      })();
    </script>
    <footer>
      <div class="footer-bottom">
        <p>
          &copy; 2025 MaxAI |
          <a href="mailto:rachellwanggg@gmail.com">andrianateam.com</a>
        </p>
      </div>
    </footer>

    <script>
      // Show menu links on burger click
      $("#menu-btn").click(function () {
        $("nav .navigation ul").addClass("active");
      });

      // Hide navbar on click function
      $("#menu-close").click(function () {
        $("nav .navigation ul").removeClass("active");
      });

      // Lesson interaction (header-only toggling; no lock system)
      $(document).on("click", ".lesson-item .lesson-header", function () {
        const $item = $(this).closest(".lesson-item");
        $item.toggleClass("expanded");
      });

      // Prevent quiz interactions from toggling the lesson container
      $(document).on("click mousedown keydown", ".quiz, .quiz *", function (e) {
        e.stopPropagation();
      });

      // Reset progress button (AI Foundations)
      (function () {
        const btn = document.getElementById("reset-progress");
        if (!btn) return;
        btn.addEventListener("click", function () {
          Swal.fire({
            title: "Reset progress?",
            text: "This will clear saved answers and unlink completion.",
            icon: "warning",
            showCancelButton: true,
            confirmButtonText: "Yes, reset",
          }).then((res) => {
            if (!res.isConfirmed) return;
            try {
              // Clear quiz state and auxiliary data for this module
              localStorage.removeItem("ai_foundations_quiz_v1");
              localStorage.removeItem("ai_foundations_quiz_total_v1");
              localStorage.removeItem("ai_foundations_quiz_done_v1");
              // Clear stored MCQ option order to allow reshuffle next time
              localStorage.removeItem("ai_foundations_quiz_order_v1");

              // If completion was recorded, subtract Home bonuses once
              if (
                localStorage.getItem("ai_foundations_completed_v1") === "true"
              ) {
                const courseKey = "home_courses_completed_bonus";
                const hoursKey = "home_hours_learned_bonus";
                const curCourses =
                  parseInt(localStorage.getItem(courseKey) || "0", 10) || 0;
                const curHours =
                  parseInt(localStorage.getItem(hoursKey) || "0", 10) || 0;
                const newCourses = Math.max(0, curCourses - 1);
                const newHours = Math.max(0, curHours - 2);
                localStorage.setItem(courseKey, String(newCourses));
                localStorage.setItem(hoursKey, String(newHours));
                // Remove recent-activity marker
                localStorage.removeItem(
                  "home_activity_logged_ai_foundations_v1"
                );
              }
              // Unset completion flag
              localStorage.removeItem("ai_foundations_completed_v1");
            } catch (_) {}
            location.reload();
          });
        });
      })();

      // Quiz rendering + logic with localStorage progress
      (function () {
        const STORAGE_KEY = "ai_foundations_quiz_v1";
        const saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || "{}");
        // Persist per-quiz option order so the correct answer isn't always first,
        // and the order remains stable across reloads.
        const ORDER_KEY = "ai_foundations_quiz_order_v1";
        let savedOrderMap = {};
        try {
          savedOrderMap = JSON.parse(localStorage.getItem(ORDER_KEY) || "{}");
        } catch (_) {
          savedOrderMap = {};
        }
        // Build a unique MCQ spec per lesson from its title/topic (no essays)
        function specForLesson(item, lessonId, index) {
          // Prefer mapping by lesson title so Qs match topics explicitly
          const title = (
            item?.querySelector(".lesson-content h4")?.textContent || ""
          ).toLowerCase();

          // Title-based specs (one per lesson topic)
          if (title.includes("what is ai")) {
            return {
              type: "mcq",
              prompt: "Which statement best defines Artificial Intelligence?",
              options: [
                [
                  "a",
                  "Systems that perceive, reason, learn and act toward goals",
                  true,
                ],
                ["b", "Only faster hardware"],
                ["c", "Only visual design"],
                ["d", "Only data compression"],
              ],
              hint: "Think perception, reasoning, learning and action.",
            };
          }
          if (title.includes("turing")) {
            return {
              type: "mcq",
              prompt: "What does the Turing Test evaluate?",
              options: [
                [
                  "a",
                  "Whether a machine can converse indistinguishably from a human",
                  true,
                ],
                ["b", "GPU clock speed"],
                ["c", "Image resolution"],
                ["d", "Training dataset size"],
              ],
              hint: "Indistinguishability from a human in conversation.",
            };
          }
          if (title.includes("history")) {
            return {
              type: "mcq",
              prompt:
                "Which classic AI approach relied on hand-crafted rules and domain expertise?",
              options: [
                ["a", "Expert systems", true],
                ["b", "Convolutional neural networks"],
                ["c", "Reinforcement learning"],
                ["d", "Self-supervised transformers"],
              ],
              hint: "Think 1970s-1980s rule-based systems.",
            };
          }
          if (title.includes("categories of ai")) {
            return {
              type: "mcq",
              prompt: "Which option best describes Narrow AI?",
              options: [
                [
                  "a",
                  "AI designed for specific tasks with limited scope",
                  true,
                ],
                [
                  "b",
                  "AI that matches human general intelligence in all tasks",
                ],
                ["c", "AI that surpasses humans in every domain"],
                ["d", "A rule that prevents overfitting"],
              ],
              hint: "Task-specific vs. general vs. superhuman.",
            };
          }
          if (
            title.includes("basic logic") ||
            title.includes("search algorithm")
          ) {
            return {
              type: "mcq",
              prompt: "BFS (Breadth-First Search) is guaranteed to find:",
              options: [
                ["a", "The shortest path in unweighted graphs", true],
                ["b", "A global optimum in any search space"],
                ["c", "The longest path"],
                ["d", "The most memory-efficient path"],
              ],
              hint: "Shortest number of edges.",
            };
          }
          if (title.includes("javascript")) {
            return {
              type: "mcq",
              prompt:
                "Which algorithm is commonly used to find the shortest path on a grid?",
              options: [
                ["a", "A* (A-star)", true],
                ["b", "Gradient Descent"],
                ["c", "K-Means"],
                ["d", "Backpropagation"],
              ],
              hint: "Heuristic + cost = A*.",
            };
          }
          if (
            title.includes("data, features") ||
            (title.includes("features") && title.includes("labels"))
          ) {
            return {
              type: "mcq",
              prompt: "In a typical ML dataset, the label refers to:",
              options: [
                ["a", "The target variable to predict", true],
                ["b", "An input feature"],
                ["c", "A unique row identifier"],
                ["d", "A model hyperparameter"],
              ],
              hint: "Inputs = features; output/target = label.",
            };
          }
          if (title.includes("learning paradigms")) {
            return {
              type: "mcq",
              prompt: "Which is an unsupervised algorithm?",
              options: [
                ["a", "K-Means clustering", true],
                ["b", "Logistic regression"],
                ["c", "Random forest"],
                ["d", "Q-learning"],
              ],
              hint: "Groups data without labels.",
            };
          }
          if (title.includes("evaluation")) {
            return {
              type: "mcq",
              prompt: "Precision is defined as:",
              options: [
                ["a", "TP / (TP + FP)", true],
                ["b", "TP / (TP + FN)"],
                ["c", "(TP + TN) / (All)"],
                ["d", "FP / (FP + TN)"],
              ],
              hint: "Quality of positive predictions.",
            };
          }
          if (
            title.includes("overfitting") ||
            title.includes("generalization")
          ) {
            return {
              type: "mcq",
              prompt: "Overfitting best describes a model that:",
              options: [
                [
                  "a",
                  "Performs well on training but poorly on unseen data",
                  true,
                ],
                ["b", "Performs poorly on both train and test"],
                ["c", "Is always linear"],
                ["d", "Has too few parameters"],
              ],
              hint: "Memorization vs. generalization.",
            };
          }
          if (title.includes("ethics") || title.includes("responsible")) {
            return {
              type: "mcq",
              prompt: "Which practice best supports Responsible AI?",
              options: [
                ["a", "Using model cards and monitoring for bias", true],
                ["b", "Maximizing accuracy at any cost"],
                ["c", "Collecting more personal data without consent"],
                ["d", "Hiding model limitations from users"],
              ],
              hint: "Fairness, privacy, transparency, and oversight.",
            };
          }

          // No fallback; require explicit mapping by title
          return null;
        }

        function markLessonComplete(lessonId, itemOverride) {
          try {
            const item =
              itemOverride ||
              document.querySelector(`.lesson-item[data-lesson="${lessonId}"]`);
            const icon = item?.querySelector(".lesson-status i");
            if (icon) {
              icon.classList.remove("fa-lock", "fa-lock-open", "fa-circle");
              icon.classList.add("fa-circle-check");
              icon.style.color = "#10b981";
            }
            item?.classList.add("completed");
          } catch (_) {}
        }

        function renderQuizForLesson(lessonId, itemEl, index) {
          const item =
            itemEl ||
            document.querySelector(`.lesson-item[data-lesson="${lessonId}"]`);
          if (!item) return;
          const spec = specForLesson(item, lessonId, index);
          if (!spec) return; // no quiz for this lesson
          const host =
            item.querySelector(".lesson-preview") ||
            item.querySelector(".lesson-details");
          if (!host) return;
          if (host.querySelector(".quiz")) return; // avoid duplicates
          const group = item.dataset.quizKey || `q-lesson-idx-${index ?? 0}`;
          item.dataset.quizKey = group;
          const wrap = document.createElement("div");
          wrap.className = "quiz";
          let inner =
            `<div class="quiz-title"><i class="fas fa-question-circle"></i> Quick Check</div>` +
            `<p class="quiz-question">${spec.prompt}</p>`;
          if (spec.type === "mcq") {
            // Determine presentation order for MCQ options (stable across reloads)
            const options = Array.isArray(spec.options)
              ? spec.options.slice()
              : [];
            if (savedOrderMap[group] && Array.isArray(savedOrderMap[group])) {
              options.sort(
                (a, b) =>
                  savedOrderMap[group].indexOf(a[0]) -
                  savedOrderMap[group].indexOf(b[0])
              );
            } else {
              for (let i = options.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [options[i], options[j]] = [options[j], options[i]];
              }
              savedOrderMap[group] = options.map((o) => o[0]);
              try {
                localStorage.setItem(ORDER_KEY, JSON.stringify(savedOrderMap));
              } catch (_) {}
            }
            inner += `<div class="quiz-options" role="radiogroup" aria-label="Lesson ${lessonId} options">`;
            options.forEach(([val, label, correct]) => {
              const cls = correct ? "quiz-option correct" : "quiz-option";
              inner += `<label class="${cls}"><input type="radio" name="${group}" value="${val}"> ${label}</label>`;
            });
            inner += `</div><button class="quiz-check" data-target="${group}" data-lesson="${lessonId}">Check Answer</button><div class="quiz-feedback" aria-live="polite"></div>`;
          } else {
            inner +=
              `<textarea class="quiz-textarea" name="${group}" rows="4" placeholder="Write your answer..."></textarea>` +
              `<button class="quiz-check" data-type="essay" data-target="${group}" data-lesson="${lessonId}">Check Answer</button>` +
              `<div class="quiz-feedback" aria-live="polite"></div>`;
          }
          wrap.innerHTML = inner;
          host.appendChild(wrap);

          // restore saved
          const sv = saved[group];
          if (sv) {
            const quiz = wrap;
            const feedback = quiz.querySelector(".quiz-feedback");
            if (spec.type === "mcq") {
              const input = quiz.querySelector(
                `input[name="${group}"][value="${sv.value}"]`
              );
              if (input) {
                input.checked = true;
              }
              if (sv.correct) {
                quiz.classList.add("correct-state");
                const chosen = input.closest(".quiz-option");
                chosen.classList.add("opt-correct");
                const mark = document.createElement("span");
                mark.className = "mark ok";
                mark.innerHTML = '<i class="fa-solid fa-check"></i>';
                chosen.appendChild(mark);
                feedback.textContent = "Completed.";
                feedback.style.color = "#10b981";
                quiz
                  .querySelectorAll('input[type="radio"]')
                  .forEach((i) => (i.disabled = true));
                markLessonComplete(lessonId);
              }
            } else {
              quiz.querySelector(".quiz-textarea").value = sv.value || "";
              if (sv.correct) {
                quiz.classList.add("correct-state");
                feedback.textContent = "Completed.";
                feedback.style.color = "#10b981";
                markLessonComplete(lessonId);
              }
            }
          }
        }

        // Render quizzes for each lesson item (fallback to generic if not in bank)
        const lessonItems = Array.from(
          document.querySelectorAll(".lesson-item[data-lesson]")
        );
        lessonItems.forEach((item, idx) => {
          const id = Number(item.getAttribute("data-lesson"));
          renderQuizForLesson(id, item, idx);
        });

        // Simple status: no locking. Only show check when completed.
        function updateStatus() {
          const savedState = JSON.parse(
            localStorage.getItem(STORAGE_KEY) || "{}"
          );
          lessonItems.forEach((item) => {
            const icon = item.querySelector(".lesson-status i");
            if (icon) {
              icon.classList.remove("fa-lock", "fa-lock-open");
            }
            item.classList.remove("locked");

            const group = item.dataset.quizKey;
            const completed =
              item.classList.contains("completed") ||
              !!(group && savedState[group]?.correct);
            if (completed) {
              item.classList.add("completed");
              if (icon) {
                icon.classList.remove("fa-circle");
                icon.classList.add("fa-circle-check");
                icon.style.color = "#10b981";
              }
            } else if (icon) {
              icon.classList.remove("fa-circle-check");
              icon.classList.add("fa-circle");
              icon.style.color = "#94a3b8";
            }
            // Always allow interaction
            item
              .querySelectorAll('input[type="radio"]')
              .forEach((i) => (i.disabled = false));
          });
          updateProgress();
        }
        updateStatus();

        // Learning progress bar and text
        function updateProgress() {
          const savedState = JSON.parse(
            localStorage.getItem(STORAGE_KEY) || "{}"
          );
          const progLabel = document.getElementById("progress-label");
          const progFill = document.getElementById("progress-fill");
          const progBar = document.getElementById("progress-bar");
          if (!progLabel || !progFill || !progBar) return;
          const withQuiz = lessonItems.filter((it) =>
            it.querySelector(".quiz")
          );
          const total = withQuiz.length;
          let done = 0;
          withQuiz.forEach((it) => {
            const group = it.dataset.quizKey;
            const completed =
              it.classList.contains("completed") ||
              !!(group && savedState[group]?.correct);
            if (completed) done++;
          });
          const pct = total > 0 ? Math.round((done / total) * 100) : 0;
          progLabel.textContent = `${pct}% Completed`;
          progFill.style.width = pct + "%";
          progBar.setAttribute("aria-valuenow", String(pct));
          // Persist coarse progress so other pages (e.g., home) can read it
          try {
            localStorage.setItem("ai_foundations_quiz_total_v1", String(total));
            localStorage.setItem("ai_foundations_quiz_done_v1", String(done));
          } catch (_) {}

          // When the course is completed (100%), set completion in localStorage
          // and increment home stats bonuses exactly once.
          try {
            if (
              pct === 100 &&
              localStorage.getItem("ai_foundations_completed_v1") !== "true"
            ) {
              localStorage.setItem("ai_foundations_completed_v1", "true");
              const courseKey = "home_courses_completed_bonus";
              const hoursKey = "home_hours_learned_bonus";
              const curCourses =
                parseInt(localStorage.getItem(courseKey) || "0", 10) || 0;
              const curHours =
                parseInt(localStorage.getItem(hoursKey) || "0", 10) || 0;
              localStorage.setItem(courseKey, String(curCourses + 1));
              localStorage.setItem(hoursKey, String(curHours + 2));
            }
          } catch (_) {}
        }

        function handleCheck(btn) {
          const group = btn.getAttribute("data-target");
          let lessonId = Number(btn.getAttribute("data-lesson"));
          const quiz = btn.closest(".quiz");
          const feedback = quiz.querySelector(".quiz-feedback");
          if (!Number.isFinite(lessonId)) {
            const parentItem = btn.closest(".lesson-item");
            lessonId = parentItem
              ? Number(parentItem.getAttribute("data-lesson"))
              : NaN;
          }
          const itemEl =
            document.querySelector(`.lesson-item[data-lesson="${lessonId}"]`) ||
            btn.closest(".lesson-item");
          // derive fixed index from the group key or list order
          let idx = -1;
          const m = (group || "").match(/q-lesson-idx-(\d+)/);
          if (m) {
            idx = parseInt(m[1], 10);
          }
          if (idx < 0) {
            const items = Array.from(
              document.querySelectorAll(".lesson-item[data-lesson]")
            );
            idx = Math.max(0, items.indexOf(itemEl));
          }
          const spec = specForLesson(itemEl, lessonId, idx);

          // reset visuals
          quiz.classList.remove("correct-state", "wrong-state", "shake");
          quiz.querySelectorAll(".quiz-option").forEach((opt) => {
            opt.classList.remove("opt-correct", "opt-wrong", "opt-right");
            const m = opt.querySelector(".mark");
            if (m) m.remove();
          });

          if (spec.type === "mcq") {
            const selected = quiz.querySelector(
              `input[name="${group}"]:checked`
            );
            if (!selected) {
              Swal.fire({
                icon: "info",
                title: "Select an answer",
                text: "Please choose an option to check.",
              });
              return;
            }
            const chosenOpt = selected.closest(".quiz-option");
            const isCorrect = chosenOpt.classList.contains("correct");
            // store
            saved[group] = { value: selected.value, correct: !!isCorrect };
            localStorage.setItem(STORAGE_KEY, JSON.stringify(saved));

            if (isCorrect) {
              quiz.classList.add("correct-state");
              chosenOpt.classList.add("opt-correct");
              const mark = document.createElement("span");
              mark.className = "mark ok";
              mark.innerHTML = '<i class="fa-solid fa-check"></i>';
              chosenOpt.appendChild(mark);
              feedback.textContent = "Correct!";
              feedback.style.color = "#10b981";
              quiz
                .querySelectorAll('input[type="radio"]')
                .forEach((i) => (i.disabled = true));
              markLessonComplete(lessonId, itemEl);
              updateStatus();
            } else {
              quiz.classList.add("wrong-state", "shake");
              chosenOpt.classList.add("opt-wrong");
              const mark = document.createElement("span");
              mark.className = "mark err";
              mark.innerHTML = '<i class="fa-solid fa-xmark"></i>';
              chosenOpt.appendChild(mark);
              const right = quiz.querySelector(".quiz-option.correct");
              if (right) right.classList.add("opt-right");
              feedback.textContent = spec.hint || "Try again.";
              feedback.style.color = "#ef4444";
            }
          } else {
            const text = (
              quiz.querySelector(".quiz-textarea").value || ""
            ).toLowerCase();
            const keywords = spec.keywords || [];
            const matches = keywords.filter((k) => text.includes(k)).length;
            const ok = matches >= (spec.minMatches || 2);
            // store
            saved[group] = { value: text, correct: !!ok };
            localStorage.setItem(STORAGE_KEY, JSON.stringify(saved));
            if (ok) {
              quiz.classList.add("correct-state");
              feedback.textContent = "Looks good!";
              feedback.style.color = "#10b981";
              markLessonComplete(lessonId, itemEl);
              updateStatus();
            } else {
              quiz.classList.add("wrong-state", "shake");
              feedback.textContent =
                "Include a couple of keywords like: " +
                keywords.slice(0, 3).join(", ");
              feedback.style.color = "#ef4444";
            }
          }
        }

        // Delegate quiz checks (vanilla)
        document.addEventListener("click", function (e) {
          const btn = e.target.closest(".quiz-check");
          if (!btn) return;
          e.preventDefault();
          handleCheck(btn);
        });
        // Delegate quiz checks (jQuery fallback)
        if (window.jQuery) {
          $(document).on("click", ".quiz-check", function (ev) {
            ev.preventDefault();
            handleCheck(this);
          });
        }
      })();
    </script>
  </body>
</html>
